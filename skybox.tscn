[gd_scene load_steps=33 format=3 uid="uid://31vsdnsofoou"]

[ext_resource type="PackedScene" uid="uid://ch0krls6y12y8" path="res://player.tscn" id="1_l1y63"]
[ext_resource type="PackedScene" uid="uid://b0gsf4ppmuj2h" path="res://src/environment/sand_storm.tscn" id="1_qsy6h"]
[ext_resource type="PackedScene" uid="uid://dlgxashpwucl5" path="res://src/object/radio/radio.tscn" id="3_cgl1j"]
[ext_resource type="PackedScene" uid="uid://bounpd4i1v5pf" path="res://src/ui/hud/hud_dev.tscn" id="3_ntfw2"]
[ext_resource type="Script" path="res://src/environment/wind_manager.gd" id="5_0otb4"]
[ext_resource type="Script" path="res://day_night.gd" id="6_aefkn"]
[ext_resource type="Script" path="res://wind_body.gd" id="6_g1hy4"]
[ext_resource type="Shader" path="res://src/environment/sky.gdshader" id="9_7spnk"]
[ext_resource type="Texture2D" uid="uid://bmoh66spei4tg" path="res://src/environment/stars.png" id="10_d5qnc"]
[ext_resource type="PackedScene" uid="uid://bxi6whsespwpy" path="res://texture/structure/ruins/ruins01.fbx" id="12_bd0gj"]
[ext_resource type="PackedScene" uid="uid://be15buugjnenc" path="res://texture/structure/ruins/ruins03.fbx" id="12_vg0di"]
[ext_resource type="PackedScene" uid="uid://d2iuna8o6eky0" path="res://src/object/agriculture/bubbleplanter.tscn" id="13_w5l2x"]
[ext_resource type="Shader" path="res://outline01.gdshader" id="15_6iddm"]
[ext_resource type="Script" path="res://rigid_body_3d.gd" id="15_lda6m"]
[ext_resource type="PackedScene" uid="uid://dsqljfot4jffp" path="res://src/object/rope/Rope.tscn" id="17_i4vci"]
[ext_resource type="PackedScene" uid="uid://kmmdmjoujgr6" path="res://src/object/hoverboard/hoverboard.tscn" id="17_oul0n"]
[ext_resource type="PackedScene" uid="uid://b15288jke7rif" path="res://src/object/food/yucca_fruit.tscn" id="20_d28ju"]
[ext_resource type="PackedScene" uid="uid://b46n1rqsodfog" path="res://src/structure/post/post_with_tether.tscn" id="20_oh1pw"]
[ext_resource type="PackedScene" uid="uid://dotdv60184fyp" path="res://src/object/food/carrot.tscn" id="20_rjruf"]
[ext_resource type="PackedScene" uid="uid://dfuxrm7tjavcw" path="res://src/object/agriculture/yucca.tscn" id="21_64xmc"]
[ext_resource type="PackedScene" uid="uid://bu1eyksqmxfpe" path="res://src/object/sticky/sticky_body.tscn" id="21_kgewf"]
[ext_resource type="PackedScene" uid="uid://dpa5driu6t5g5" path="res://src/structure/post/post.tscn" id="22_nwsvy"]

[sub_resource type="QuadMesh" id="QuadMesh_oy20x"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_y4tmv"]
data = PackedVector3Array(0.5, -0.5, 0, -0.5, -0.5, 0, 0.5, 0.5, 0, -0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n2vah"]
shader = ExtResource("9_7spnk")
shader_parameter/day_top_color = Color(0.1, 0.6, 1, 1)
shader_parameter/day_bottom_color = Color(0.4, 0.8, 1, 1)
shader_parameter/sunset_top_color = Color(0.7, 0.75, 1, 1)
shader_parameter/sunset_bottom_color = Color(1, 0.5, 0.7, 1)
shader_parameter/night_top_color = Color(0.02, 0, 0.04, 1)
shader_parameter/night_bottom_color = Color(0.1, 0, 0.2, 1)
shader_parameter/horizon_color = Color(0, 0.7, 0.8, 1)
shader_parameter/horizon_blur = 0.05
shader_parameter/sun_color = Color(10, 8, 1, 1)
shader_parameter/sun_sunset_color = Color(10, 0, 0, 1)
shader_parameter/sun_size = 0.2
shader_parameter/sun_blur = 10.0
shader_parameter/moon_color = Color(1, 0.95, 0.7, 1)
shader_parameter/moon_size = 0.06
shader_parameter/moon_blur = 0.1
shader_parameter/clouds_edge_color = Color(0.8, 0.8, 0.98, 1)
shader_parameter/clouds_top_color = Color(1, 1, 1, 1)
shader_parameter/clouds_middle_color = Color(0.92, 0.92, 0.98, 1)
shader_parameter/clouds_bottom_color = Color(0.83, 0.83, 0.94, 1)
shader_parameter/clouds_speed = 2.0
shader_parameter/clouds_direction = 0.2
shader_parameter/clouds_scale = 1.0
shader_parameter/clouds_cutoff = 0.3
shader_parameter/clouds_fuzziness = 0.5
shader_parameter/clouds_weight = 0.0
shader_parameter/clouds_blur = 0.25
shader_parameter/stars_speed = 1.0
shader_parameter/stars_scale = 1.0
shader_parameter/stars_opacity = 1.0
shader_parameter/stars_texture = ExtResource("10_d5qnc")
shader_parameter/overwritten_time = 0.0

[sub_resource type="Sky" id="Sky_hpyh2"]
sky_material = SubResource("ShaderMaterial_n2vah")

[sub_resource type="Environment" id="Environment_kyd2a"]
background_mode = 2
sky = SubResource("Sky_hpyh2")
ambient_light_source = 3
volumetric_fog_enabled = true
volumetric_fog_density = 0.0

[sub_resource type="PrismMesh" id="PrismMesh_i1obt"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_wga7v"]
points = PackedVector3Array(0, 0.5, 0.5, 0.5, -0.5, 0.5, 0, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_366on"]
points = PackedVector3Array(0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n7v7n"]
render_priority = 0
shader = ExtResource("15_6iddm")
shader_parameter/border_width = null
shader_parameter/color = Color(0.8, 0.7, 0.5, 1)
shader_parameter/pattern = null
shader_parameter/line_number = null
shader_parameter/line_sharpness = null
shader_parameter/pulse = null
shader_parameter/pulse_speed = null
shader_parameter/line_movement = null
shader_parameter/line_movement_speed = null
shader_parameter/wave = null

[sub_resource type="BoxMesh" id="BoxMesh_midvi"]

[node name="Skybox" type="Node3D"]

[node name="Floor" type="StaticBody3D" parent="."]
transform = Transform3D(500, 0, 0, 0, 500, 0, 0, 0, 500, 0, -0.0652623, 0)
collision_layer = 3

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 5.96046e-08, 1, 0, -1, 5.96046e-08, 0, 0, 0)
mesh = SubResource("QuadMesh_oy20x")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 5.96046e-08, 1, 0, -1, 5.96046e-08, 0, 0, 0)
shape = SubResource("ConcavePolygonShape3D_y4tmv")

[node name="Player" parent="." instance=ExtResource("1_l1y63")]
transform = Transform3D(0.258819, 0, 0.965926, 0, 1, 0, -0.965926, 0, 0.258819, 0.531002, 0.454737, 1.75178)
gravity = 9.8

[node name="DevHUD" parent="Player" node_paths=PackedStringArray("player", "environment") instance=ExtResource("3_ntfw2")]
player = NodePath("..")
environment = NodePath("../../Environment")

[node name="Environment" type="Node3D" parent="."]
script = ExtResource("6_aefkn")
day_time = 12.0
time_scale = 0.1
sun_base_energy = 1.0
moon_base_enegry = 0.1

[node name="WindManager" type="Node3D" parent="Environment"]
script = ExtResource("5_0otb4")

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_kyd2a")

[node name="Sun" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.920903, 0, -0.389794, 0.389794, -4.37114e-08, 0.920902, -1.70384e-08, -1, -4.02539e-08, 0, 0, 0)
rotation_order = 4
shadow_enabled = true
shadow_opacity = 0.75
shadow_blur = 5.0

[node name="Moon" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.995977, 0, 0.0895897, -0.028138, 0.949397, 0.312814, -0.085056, -0.314077, 0.94558, 0, 0, 0)
rotation_order = 4
light_color = Color(1, 1, 0.6, 1)
light_energy = 0.1
shadow_enabled = true
shadow_opacity = 0.25
shadow_blur = 5.0
directional_shadow_fade_start = 0.1

[node name="SandStorm" parent="." node_paths=PackedStringArray("wind_manager", "env") instance=ExtResource("1_qsy6h")]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 179.945, 82.0078, 0)
wind_manager = NodePath("../Environment/WindManager")
env = NodePath("../Environment")

[node name="Objects" type="Node3D" parent="."]

[node name="WindyBody" type="RigidBody3D" parent="Objects"]
script = ExtResource("6_g1hy4")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Objects/WindyBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.19843, 1.99198, 0)
mesh = SubResource("PrismMesh_i1obt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Objects/WindyBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.19843, 1.99198, 0)
shape = SubResource("ConvexPolygonShape3D_wga7v")

[node name="VelocityLabel3D" type="Label3D" parent="Objects/WindyBody"]
transform = Transform3D(-0.0248684, 0, -0.999691, 0, 1, 0, 0.999691, 0, -0.0248684, 3.02699, 2.6444, 0.0413471)
render_priority = 2
text = "HELLO WORLD"

[node name="BubblePlanter" parent="Objects" node_paths=PackedStringArray("wind_manager") instance=ExtResource("13_w5l2x")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.23981, 3.19715, -1)
wind_manager = NodePath("../../Environment/WindManager")

[node name="Radio" parent="Objects" node_paths=PackedStringArray("env") instance=ExtResource("3_cgl1j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.248756, 1.93474, -5.07413)
env = NodePath("../../Environment")

[node name="CompanionCube" type="RigidBody3D" parent="Objects" groups=["interactable"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.04688, 2, -5)
collision_layer = 4
collision_mask = 5
script = ExtResource("15_lda6m")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Objects/CompanionCube"]
shape = SubResource("ConvexPolygonShape3D_366on")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Objects/CompanionCube"]
material_overlay = SubResource("ShaderMaterial_n7v7n")
mesh = SubResource("BoxMesh_midvi")

[node name="Area3D" type="Area3D" parent="Objects/CompanionCube"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Objects/CompanionCube/Area3D"]
shape = SubResource("ConvexPolygonShape3D_366on")

[node name="Rope" parent="Objects" node_paths=PackedStringArray("start_point", "end_point") instance=ExtResource("17_i4vci")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.2909, 0.879572, 0.698084)
start_point = NodePath("../Sticky2")
start_is_rigidbody = true
end_point = NodePath("../Sticky")

[node name="Hoverboard2" parent="Objects" instance=ExtResource("17_oul0n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.98076, 0.506934, -1.54647)

[node name="Carrot" parent="Objects" instance=ExtResource("20_rjruf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1.16894, 1)

[node name="YuccaFruit" parent="Objects" instance=ExtResource("20_d28ju")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.60401, 0.66643, -3.51304)

[node name="yucca" parent="Objects" instance=ExtResource("21_64xmc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0.601411, 2)

[node name="Post" parent="Objects" instance=ExtResource("22_nwsvy")]
transform = Transform3D(0.866025, -0.5, 0, 0.5, 0.866025, 0, 0, 0, 1, -15.5267, -0.100854, -5.91397)

[node name="Sticky2" parent="Objects" instance=ExtResource("21_kgewf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 2, 2)

[node name="Sticky" parent="Objects" instance=ExtResource("21_kgewf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 1, 1)

[node name="TetherPost" parent="Objects" instance=ExtResource("20_oh1pw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.35703, 0.716409, -0.615473)

[node name="Ruins" type="Node3D" parent="."]

[node name="ruins03" parent="Ruins" instance=ExtResource("12_vg0di")]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 1.94333, 3.40192, -18.7616)

[node name="ruins01" parent="Ruins" instance=ExtResource("12_bd0gj")]
transform = Transform3D(0.657863, 0, 9.97834, 0, 10, 0, -9.97834, 0, 0.657863, -1.578, 5.5, 16.901)

[connection signal="cardinal_direction_changed" from="Environment/WindManager" to="Objects/WindyBody" method="_on_cardinal_direction_changed"]
[connection signal="gust_ended" from="Environment/WindManager" to="Objects/WindyBody" method="_on_gust_ended"]
[connection signal="gust_started" from="Environment/WindManager" to="." method="_on_wind_manager_gust_started"]
[connection signal="gust_started" from="Environment/WindManager" to="Objects/WindyBody" method="_on_gust_started"]
